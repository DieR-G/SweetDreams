(this["webpackJsonpfinal-project"]=this["webpackJsonpfinal-project"]||[]).push([[0],{20:function(e,t,n){},30:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(21),s=n.n(a),o=(n(20),n(4)),i=(n(30),n(3)),l=n.n(i),u=n(6),d=n.p+"static/media/candy_logo.c6b15da6.svg",j=n(1);var b=function(e){return Object(j.jsxs)("div",{className:"flex md:w-80 md:h64 w64 h-32 justify-evenly items-center mt-4 md:mt-10",children:[Object(j.jsx)("div",{className:"md:h-32 md:w-32 h-24 w-24",children:Object(j.jsx)("img",{src:d,alt:""})}),Object(j.jsx)("div",{className:"md:w-40 w-32 h-24",children:Object(j.jsx)("p",{className:"font-styled md:text-5xl text-4xl ".concat(e.fontColor," text-center"),children:"Sweet Dreams"})})]})},f=n(15);var x=function(e){return Object(j.jsxs)("div",{className:"focus-within:ring-2 ring-gray-700 flex items-center bg-gray-200 w-full h-10 p-4 rounded-xl",children:[Object(j.jsx)(f.b,{}),Object(j.jsx)("input",{required:!0,className:"ml-4 font-round text-lg outline-none bg-gray-200 w-11/12",type:"text",id:"username",name:"username",placeholder:"Username"})]})},p=n(22);var m=function(e){return Object(j.jsxs)("div",{className:"focus-within:ring-2 ring-gray-700 flex items-center bg-gray-200 w-full h-10 p-4 rounded-xl",children:[Object(j.jsx)(p.a,{}),Object(j.jsx)("input",{className:"ml-4 font-round text-lg outline-none bg-gray-200 w-11/12",type:"password",id:"password",name:"password",placeholder:"Password"})]})};var h=function(e){return Object(j.jsx)("div",{className:"flex justify-center",children:Object(j.jsx)("button",{type:"submit",onClick:e.clickHandler,className:"cursor-pointer w-28 h-12 bg-lightgreen hover:bg-darkgreen rounded-2xl",children:Object(j.jsx)("label",{className:"cursor-pointer font-bold font-normal text-xl text-white",children:"Login"})})})},g=n(8),O={};O.login=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={},r=new FormData(document.querySelector("#loginForm")),e.next=5,fetch("https://posts-pw2021.herokuapp.com/api/v1/auth/signin",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(r.get("username"),"&password=").concat(r.get("password"))});case 5:return c=e.sent,e.next=8,c.json();case 8:return a=e.sent,c.ok?(n={logged:!0,token:a.token},localStorage.setItem("login",JSON.stringify(n))):(n.logged=!1,n.body=a),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O.whoami=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={found:!1,username:"",role:""},e.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/auth/whoami",{method:"GET",withCredentials:!0,headers:{Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,n=r.ok?Object(g.a)({found:!0},c):{found:!1},e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var v=O,w=n(10);function y(e){var t=[];if(e.errorMsg.constructor===Array){var n,r=Object(w.a)(e.errorMsg);try{for(r.s();!(n=r.n()).done;){var c=n.value;-1!==c.search("user")&&t.push(Object(j.jsx)("p",{children:"Username cannot be empty"})),-1!==c.search("pass")&&t.push(Object(j.jsx)("p",{children:"Password cannot be empty"}))}}catch(a){r.e(a)}finally{r.f()}}else-1!==e.errorMsg.search("User")?t.push(Object(j.jsx)("p",{children:"Please check the username"})):-1!==e.errorMsg.search("Pass")&&t.push(Object(j.jsx)("p",{children:"Please check the password"}));return Object(j.jsx)("div",{className:"w-full font-normal text-red-500 font-semibold text-lg break-all flex flex-col gap-5 text-center",children:t})}var k=Object(r.createContext)(),N=n(5);var S=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(Object(j.jsx)("div",{className:"hidden"})),i=Object(o.a)(s,2),d=i[0],f=i[1],p=Object(r.useContext)(k),g=p.authenticated,O=p.setAuthenticated,w=Object(N.f)(),S={};Object(r.useEffect)((function(){g.logged&&w("/home")}),[c]);var C=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.login(t);case 2:if((n=e.sent).logged)S={logged:!0,token:n.token},O(S),a(!c);else{for(s in a(!0),n.body)r=n.body[s];f(Object(j.jsx)(y,{errorMsg:r}))}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"h-screen w-screen min-w-full bg-loginpattern bg-no-repeat bg-cover flex items-center justify-center overflow-y-scroll min-h-600",children:Object(j.jsxs)("div",{className:"xl:w-4/12 flex-grow-0 w-11/12 pt-2 pb-14 bg-white rounded-2xl flex items-center flex-col justify-start",children:[Object(j.jsx)("div",{className:"md:mb-10 mb-4",children:Object(j.jsx)(b,{})}),Object(j.jsxs)("form",{className:"flex flex-col md:w-4/6 sm:w-5/6 gap-10",id:"loginForm",children:[Object(j.jsx)(x,{}),Object(j.jsx)(m,{}),d,Object(j.jsx)(h,{clickHandler:C})]})]})})},C=n(17),P=n(16);function F(){var e=Object(N.f)();return Object(j.jsx)("div",{className:"min-h-screen min-w-full flex justify-center bg-gray-100 items-center",children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"flex justify-around items-center text-6xl flex-col font-normal lg:text-9xl font-bold gap-x-1 lg:gap-x-10 mb-10 text-gray-900",children:[Object(j.jsx)("div",{children:Object(j.jsx)(P.a,{})}),Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"404"})})]}),Object(j.jsxs)("div",{className:"w-full flex flex-col gap-y-5 items-center",children:[Object(j.jsx)("div",{children:Object(j.jsx)("h2",{className:"text-4xl font-bold font-round",children:"Not found!"})}),Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"text-lg md:text-2xl",children:"Sorry, we couldn't find the requested page"})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){e("/")},className:"bg-purple-600 hover:bg-purple-700 text-gray-100 w-24 h-10 rounded-xl font-semibold",children:"Go home"})})]})]})})}var E=function(){return Object(j.jsx)("div",{className:"w-full h-screen flex justify-center items-center",children:Object(j.jsxs)("div",{className:"text-5xl xl:text-7xl font-semibold flex gap-x-5 text-purple-700",children:[Object(j.jsx)(P.b,{className:"animate-spin"}),Object(j.jsx)("p",{children:"Loading"})]})})},T={};T.getPost=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/one/"+t,{method:"GET",withCredentials:!0,headers:{Authorization:"Bearer ".concat(n)}});case 2:if(!(r=e.sent).ok){e.next=10;break}return e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",Object(g.a)({fetched:!0},c));case 10:return e.abrupt("return",{fetched:!1});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T.getFavorites=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/fav",{method:"GET",withCredentials:!0,headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=10;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",Object(g.a)({fetched:!0},r));case 10:return e.abrupt("return",{fetched:!1});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var A=T,D=n(23);var I=function(){return Object(j.jsxs)("div",{className:"w-full h-screen flex justify-center items-center flex-col bg-gray-100",children:[Object(j.jsx)("div",{className:"text-9xl text-indigo-600 mb-10",children:Object(j.jsx)(D.a,{})}),Object(j.jsxs)("div",{className:"font-round xl:text-2xl font-semibold",children:[Object(j.jsx)("p",{children:"Sorry, the requested post does not exist"}),Object(j.jsxs)(C.b,{to:"/home",className:"flex gap-x-3 underline text-gray-600 justify-center text-lg mt-3 items-center",children:[Object(j.jsx)(f.a,{})," Go back home"]})]})]})},L=n(24),M=n(9);var H=function(e){var t="text-2xl text-black",n="https://posts-pw2021.herokuapp.com/api/v1/post/fav/".concat(e.postId),c=Object(r.useState)(Object(j.jsx)(M.f,{})),a=Object(o.a)(c,2),s=a[0],i=a[1],d=Object(r.useState)(e.favorites),b=Object(o.a)(d,2),f=b[0],x=b[1],p=Object(r.useState)(!1),m=Object(o.a)(p,2),h=m[0],g=m[1],O=Object(r.useState)(t),v=Object(o.a)(O,2),y=v[0],N=v[1],S=Object(r.useContext)(k).authenticated,C=function(){},P=function(){var t=Object(u.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n,{method:"PATCH",withCredentials:!0,headers:{Authorization:"Bearer ".concat(S.token)}});case 2:t.sent.ok&&(r=f,h?(r=r.filter((function(t){return t!==e.postId})),x(r),g(!1)):(r.push(e.postId),x(r),g(!0)));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){console.log(f);var n,r=Object(w.a)(f);try{for(r.s();!(n=r.n()).done;){n.value===e.postId&&(g(!0),N("text-2xl text-yellow-500"),i(Object(j.jsx)(M.b,{})))}}catch(c){r.e(c)}finally{r.f()}h||(N(t),i(Object(j.jsx)(M.f,{})))}),[h]),Object(j.jsx)("div",{className:"flex justify-center flex-col items-center",children:Object(j.jsx)("button",{onMouseEnter:h?C:function(){i(Object(j.jsx)(M.b,{}))},onMouseLeave:h?C:function(){i(Object(j.jsx)(M.f,{}))},onClick:P,className:y,children:s})})};var z=function(e){var t=Object(r.useState)(e.likes),n=Object(o.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(Object(j.jsx)(M.e,{})),i=Object(o.a)(s,2),d=i[0],b=i[1],f=Object(r.useState)("text-xl"),x=Object(o.a)(f,2),p=x[0],m=x[1],h=Object(r.useState)(!1),g=Object(o.a)(h,2),O=g[0],v=g[1],y="https://posts-pw2021.herokuapp.com/api/v1/post/like/"+e.postId,N=Object(r.useContext)(k).authenticated,S=function(){},C=function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(y,{method:"PATCH",withCredentials:!0,headers:{Authorization:"Bearer ".concat(N.token)}});case 2:t.sent.ok&&(r=c,O?(r=r.filter((function(t){return t.username!==e.loggedUser.username})),a(r),v(!1)):(r.push({username:e.loggedUser.username}),a(r),v(!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){var t,n=Object(w.a)(c);try{for(n.s();!(t=n.n()).done;){t.value.username===e.loggedUser.username&&(v(!0),m("text-xl text-red-500"),b(Object(j.jsx)(M.a,{})))}}catch(r){n.e(r)}finally{n.f()}O||(m("text-xl text-black"),b(Object(j.jsx)(M.e,{})),console.log("now should have hover"))}),[O]),Object(j.jsxs)("div",{className:"flex items-center gap-x-3",children:[Object(j.jsx)("button",{className:p,onMouseEnter:O?S:function(){b(Object(j.jsx)(M.a,{}))},onMouseLeave:O?S:function(){b(Object(j.jsx)(M.e,{}))},onClick:C,children:d}),Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"font-semibold font-normal text-lg",children:c.length})})]})};var B=function(e){var t=e.currentPost,n=new Date(t.createdAt);return Object(j.jsxs)("div",{className:"shadow border border-gray-200 bg-white rounded-md w-full flex md:justify-around flex-col-reverse justify-end md:flex-row",children:[Object(j.jsxs)("div",{className:"md:w-3/4 py-5 px-7",children:[Object(j.jsxs)("div",{className:"flex items-center",children:[Object(j.jsx)("div",{className:"pr-2 border-r border-gray-400 w-8/12 md:w-auto",children:Object(j.jsx)("h2",{className:"font-bold text-gray-800 font-round text-lg break-words",children:t.title})}),Object(j.jsx)("div",{className:"ml-2",children:Object(j.jsxs)("p",{className:"font-medium text-gray-400",children:["Created: ",n.toLocaleDateString("short")]})})]}),Object(j.jsxs)("div",{className:"mt-4 w-full",children:[Object(j.jsx)("p",{children:t.description}),Object(j.jsxs)("p",{className:"text-sm font-light text-gray-300 mt-3",children:["Post by: ",t.user.username]})]})]}),Object(j.jsxs)("div",{className:"md:w-1/4 h-full flex justify-evenly items-center mt-3 md:mt-0",children:[Object(j.jsx)(z,{postId:e.postId,loggedUser:e.loggedUser,likes:t.likes}),Object(j.jsx)(H,{favorites:e.favorites,postId:e.postId})]})]})},U=n(14);var q=function(e){var t=void 0!==e.comment.user?e.comment.user.username:"someone";return Object(j.jsxs)("div",{className:"flex flex-col",children:[Object(j.jsx)("div",{children:Object(j.jsxs)("span",{className:"font-round font-semibold",children:[t," said:"]})}),Object(j.jsx)("div",{className:"border-l-2 border-gray-700 ml-2 pl-3 mt-1",children:Object(j.jsx)("p",{className:"break-words",children:e.comment.description})})]})};var G=function(e){return Object(j.jsxs)("div",{className:"w-full flex lg:gap-x-3 lg:gap-y-0 gap-y-4 text-sm md:text-lg flex-col lg:flex-row items-center",children:[Object(j.jsx)("div",{className:"w-full bg-gray-300 rounded-2xl flex  justify-center",children:Object(j.jsx)("textarea",{className:"w-11/12 resize-none bg-transparent font-round my-3 outline-none",name:"comment",id:"comment",rows:"2",placeholder:"Leave a comment..."})}),Object(j.jsx)("button",{onClick:e.commentFunction,className:"bg-lightgreen hover:bg-darkgreen text-white font-round font-bold px-3 py-2 rounded-xl w-5/12 sm:w-4/12 md:w-auto lg:text-sm lg:py-2 lg:px-4",children:"Respond"})]})};var J=function(e){var t="https://posts-pw2021.herokuapp.com/api/v1/post/comment/".concat(e.postId),n=Object(r.useState)(e.comments),c=Object(o.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(!1),d=Object(o.a)(i,2),b=d[0],f=d[1],x=Object(r.useContext)(k).authenticated,p=Object(N.f)(),m=function(){var e=Object(u.a)(l.a.mark((function e(){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=document.querySelector("#comment")).value.length<8)){e.next=5;break}f(!0),e.next=14;break;case 5:return e.next=7,v.whoami(x.token);case 7:if(!(r=e.sent).found){e.next=14;break}return c=[].concat(Object(U.a)(a),[{description:n.value,user:{username:r.username},_id:"".concat(n.value,"saloftheearth")}]),e.next=12,fetch(t,{method:"PATCH",withCredentials:!0,headers:{Authorization:"Bearer ".concat(x.token),"Content-Type":"application/x-www-form-urlencoded"},body:"description=".concat(n.value)});case 12:e.sent.ok?(n.value="",s(c),f(!1)):p("/home");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(j.jsx)("p",{className:" text-red-500 text-sm",children:"Comments must have at least 8 characters"});return Object(j.jsxs)("div",{className:"w-full rounded-xl bg-white flex flex-col py-5 px-3 md:px-7 gap-y-2",children:[Object(j.jsx)("div",{className:"ml-2",children:Object(j.jsx)("span",{className:"font-styled text-xl font-medium",children:"Comments"})}),Object(j.jsx)("div",{children:Object(j.jsx)(G,{commentFunction:m})}),b?h:Object(j.jsx)(j.Fragment,{}),Object(j.jsx)("hr",{className:"border-1 border-gray-400 mt-2"}),Object(j.jsx)("div",{className:"flex flex-col gap-y-4",children:a.map((function(e){return Object(j.jsx)(q,{comment:e},e._id)}))})]})};var R=function(e){var t=Object(N.g)().id,n=Object(r.useState)(!1),c=Object(o.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(Object(j.jsx)("div",{})),d=Object(o.a)(i,2),b=d[0],f=d[1],x=Object(j.jsx)(E,{}),p=Object(r.useContext)(k).authenticated,m=Object(N.f)(),h=function(){m("/home")};return Object(r.useEffect)((function(){p.logged?a||Object(u.a)(l.a.mark((function e(){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getPost(t,p.token);case 2:return n=e.sent,e.next=5,v.whoami(p.token);case 5:return r=e.sent,e.next=8,A.getFavorites(p.token);case 8:c=e.sent,n.fetched&&c.fetched?f(Object(j.jsx)("div",{className:"w-full min-h-screen flex justify-center bg-loginpattern pb-6",children:Object(j.jsxs)("div",{className:"xl:w-2/5 w-10/12 mt-4 flex flex-col gap-y-5",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:h,className:"absolute hover:bg-white rounded-full border-2 border-white ml-4 mt-3 text-white text-2xl hover:text-black text-center hover:border-0",children:Object(j.jsx)(L.a,{})}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{className:"w-full rounded-lg",src:n.image,alt:"post"})})]}),Object(j.jsx)(B,{postId:t,loggedUser:r,currentPost:n,favorites:c.favorites}),Object(j.jsx)(J,{comments:n.comments,postId:t})]})})):f(Object(j.jsx)(I,{})),s(!0);case 11:case"end":return e.stop()}}),e)})))():m("/")}),[a]),Object(j.jsx)(j.Fragment,{children:a?b:x})},_=Object(r.createContext)(),W=function(e){var t=Object(r.useState)("create"),n=Object(o.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(0),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(r.useState)("Hola"),b=Object(o.a)(d,2),f=b[0],x=b[1],p=Object(r.useState)(void 0),m=Object(o.a)(p,2),h=m[0],g=m[1],O=Object(r.useState)(0),v=Object(o.a)(O,2),w=v[0],y=v[1],k=Object(r.useState)(!1),N=Object(o.a)(k,2),S={formState:c,setFormState:a,postState:l,setPostState:u,helpMessage:f,setHelpMessage:x,postId:h,setPostId:g,page:w,setPage:y,clear:N[0],setClear:N[1]};return Object(j.jsx)(_.Provider,{value:S,children:e.children})},K=function(){var e=Object(r.useContext)(_);if(!e)throw new Error("No est\xe1s dentro del Admin Context");return e},Q=n(12),V="https://posts-pw2021.herokuapp.com/api/v1",X={tempLogin:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:"username=gp30_admin&password=QNnbLKHxVe7ktNog"},e.next=4,fetch("".concat(V,"/auth/signin"),t);case 4:if(!(n=e.sent).ok){e.next=10;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),getAdminPosts:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c,a,s,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:10,r=o.length>2&&void 0!==o[2]?o[2]:0,e.prev=2,c={headers:{Authorization:"Bearer ".concat(t)},method:"GET"},e.next=6,fetch("".concat(V,"/post/owned?limit=").concat(n,"&page=").concat(r),c);case 6:if(!(a=e.sent).ok){e.next=12;break}return e.next=10,a.json();case 10:return s=e.sent,e.abrupt("return",s);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),getOnePost:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={headers:{Authorization:"Bearer ".concat(t)},method:"GET"},e.next=4,fetch("".concat(V,"/post/one/").concat(n),r);case 4:if(!(c=e.sent).ok){e.next=10;break}return e.next=8,c.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),createPost:function(){var e=Object(u.a)(l.a.mark((function e(t,n,r,c){var a,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({title:n,description:r,image:c})},e.next=4,fetch("".concat(V,"/post/create"),a);case 4:if(!(s=e.sent).ok){e.next=10;break}return e.next=8,s.json();case 8:return o=e.sent,e.abrupt("return",o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r,c){return e.apply(this,arguments)}}(),toggleActive:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={headers:{Authorization:"Bearer ".concat(t)},method:"PATCH"},e.next=4,fetch("".concat(V,"/post/toggle/").concat(n),r);case 4:if(!(c=e.sent).ok){e.next=10;break}return e.next=8,c.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),updatePost:function(){var e=Object(u.a)(l.a.mark((function e(t,n,r,c,a){var s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({title:r,description:c,image:a})},e.next=4,fetch("".concat(V,"/post/update/").concat(n),s);case 4:if(!(o=e.sent).ok){e.next=10;break}return e.next=8,o.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r,c,a){return e.apply(this,arguments)}}()},Y=function(){var e=K(),t=e.helpMessage,n=e.setHelpMessage,c=Object(r.useContext)(k).authenticated,a=Object(r.useState)({title:"",description:"",image:""}),s=Object(o.a)(a,2),i=s[0],d=s[1],b=function(e){d(Object(g.a)(Object(g.a)({},i),{},Object(Q.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=c.token,e.next=4,X.createPost(a,t,n,r);case 4:(s=e.sent)?(console.log(s),(o=void 0).preventDefault(),o.target.reset(),d({title:"",description:"",image:""})):console.log("Ha ocurrido un error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var o}),e,null,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"bg-purple-700 flex flex-col items-center w-full min-h-690 md:w-1/2 md:h-screen",children:[Object(j.jsxs)("form",{id:"create-form",className:"bg-gray-100 flex flex-col mt-5 p-5 rounded-lg w-4/5",children:[Object(j.jsx)("h2",{className:"font-normal font-bold text-center text-3xl",children:"Create post"}),Object(j.jsx)("label",{htmlFor:"title-input",className:"mt-2",children:"Title"}),Object(j.jsx)("input",{type:"text",id:"title-input",name:"title",placeholder:"f.e. The benefits of exercise",className:"border-2 border-gray-300 mt-1 px-3 py-1 rounded",onChange:b}),Object(j.jsx)("label",{htmlFor:"description-text-area",className:"mt-4",children:"Description"}),Object(j.jsx)("textarea",{id:"description-text-area",name:"description",cols:"40",rows:"5",placeholder:"f.e. The health benefits of regular physical activity and exercise cannot be ignored. Everyone benefits from exercise, regardless of age, gender, or physical ability",className:"border-2 border-gray-300 mt-1 px-3 py-1 rounded",onChange:b}),Object(j.jsx)("label",{htmlFor:"image-input",className:"mt-4",children:"Image"}),Object(j.jsx)("input",{type:"text",id:"image-input",name:"image",placeholder:"f.e. https://health.clevelandclinic.org/wp-content/uploads/sites/3/2013/09/inexpensiveExercise-1277759983-770x533-1.jpg",className:"border-2 border-gray-300 mt-1 px-3 py-1 rounded",onChange:b}),Object(j.jsxs)("div",{className:"flex flex-col justify-evenly w-full mt-2 lg:flex-row",children:[Object(j.jsx)("button",{id:"clear-all",className:"bg-gray-300 hover:bg-gray-400 mt-5 px-2 py-2 rounded self-center text-center w-full lg:w-2/6",onClick:function(e){e.preventDefault(),document.querySelector("#create-form").reset(),d({title:"",description:"",image:""})},children:"Clear all"}),Object(j.jsx)("button",{type:"submit",id:"submit",className:"bg-green-600 hover:bg-green-700 mt-5 px-2 py-2  rounded self-center text-center text-white w-full lg:w-2/6",onClick:function(e){var t=!0,r=Object(g.a)({},i),c=r.title,a=r.description,s=r.image,o=document.querySelector("#help-message");""===c.trim()?(n("Debes ingresar un titulo"),t=!1):""===a.trim()?(n("Debes ingresar una descripci\xf3n"),t=!1):""===s.trim()?(n("Debes ingresar una URL como imagen"),t=!1):c.trim().length<8||c.trim().length>32?(n("El titulo debe tener entre 8 y 32 caracteres"),t=!1):a.length<8&&(n("La descripci\xf3n debe tener como m\xednimo 8 caracteres"),t=!1),t?f(c,a,s):(e.preventDefault(),o.classList.remove("hidden"),setTimeout((function(){o.classList.add("hidden")}),3500))},children:"Create post"})]})]}),Object(j.jsx)("p",{id:"help-message",className:"bg-orange hidden mt-8 py-2 rounded text-center text-xl text-white w-3/4",children:t})]})},Z=function(){var e=K(),t=e.postId,n=e.setFormState,c=e.setPostId,a=e.helpMessage,s=e.setHelpMessage,i=Object(r.useContext)(k).authenticated,d=Object(r.useState)({title:"",description:"",image:""}),b=Object(o.a)(d,2),f=b[0],x=b[1];Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=i.token,e.next=4,X.getOnePost(n,t);case 4:r=e.sent,c={title:r.title,description:r.description,image:r.image},x(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var p=function(e){x(Object(g.a)(Object(g.a)({},f),{},Object(Q.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(u.a)(l.a.mark((function e(t,r,a,s,o){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.updatePost(t,r,a,s,o);case 3:(i=e.sent)?(console.log(i),n("create"),c(void 0)):console.log("Ha ocurrido un error"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r,c,a){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"bg-green-600 flex flex-col items-center w-full min-h-690 md:w-1/2 md:h-screen",children:[Object(j.jsxs)("form",{className:"bg-gray-100 flex flex-col mt-5 p-5 rounded-lg w-4/5",children:[Object(j.jsx)("h2",{className:"font-normal font-bold text-center text-3xl",children:"Edit post"}),Object(j.jsx)("label",{htmlFor:"title-input",className:"mt-2",children:"Title"}),Object(j.jsx)("input",{type:"text",id:"title-input",name:"title",placeholder:"f.e. The benefits of exercise",className:"border-2 border-gray-300 mt-1 px-3 py-1 rounded",value:f.title,onChange:p}),Object(j.jsx)("label",{htmlFor:"description-text-area",className:"mt-4",children:"Description"}),Object(j.jsx)("textarea",{id:"description-text-area",name:"description",cols:"40",rows:"5",placeholder:"f.e. The health benefits of regular physical activity and exercise cannot be ignored. Everyone benefits from exercise, regardless of age, gender, or physical ability",className:"border-2 border-gray-300 mt-1 px-3 py-1 rounded",value:f.description,onChange:p}),Object(j.jsx)("label",{htmlFor:"image-input",className:"mt-4",children:"Image"}),Object(j.jsx)("input",{type:"text",id:"image-input",name:"image",placeholder:"f.e. https://health.clevelandclinic.org/wp-content/uploads/sites/3/2013/09/inexpensiveExercise-1277759983-770x533-1.jpg",className:"border-2 border-gray-300 mt-1 px-3 py-1 rounded",value:f.image,onChange:p}),Object(j.jsxs)("div",{className:"flex flex-col justify-evenly w-full mt-2 lg:flex-row",children:[Object(j.jsx)("button",{id:"clear-all",className:"bg-gray-300 hover:bg-gray-400 mt-5 px-2 py-2 rounded self-center text-center w-full lg:w-2/6",onClick:function(){n("create"),c(void 0)},children:"Cancel"}),Object(j.jsx)("button",{id:"update",className:"bg-purple-600 hover:bg-purple-800 mt-5 px-2 py-2  rounded self-center text-center text-white w-full lg:w-2/6",onClick:function(e){var n=!0,r=Object(g.a)({},f),c=r.title,a=r.description,o=r.image,l=document.querySelector("#help-message-edit");if(""===c.trim()?(s("Debes ingresar un titulo"),n=!1):""===a.trim()?(s("Debes ingresar una descripci\xf3n"),n=!1):""===o.trim()?(s("Debes ingresar una URL como imagen"),n=!1):c.trim().length<8||c.trim().length>32?(s("El titulo debe tener entre 8 y 32 caracteres"),n=!1):a.trim().length<8&&(s("La descripci\xf3n debe tener como m\xednimo 8 caracteres"),n=!1),n){var u=i.token;m(u,t,c,a,o)}else e.preventDefault(),l.classList.remove("hidden"),setTimeout((function(){l.classList.add("hidden")}),3500)},children:"Edit post"})]})]}),Object(j.jsx)("p",{id:"help-message-edit",className:"bg-orange hidden mt-8 py-2 rounded text-center text-xl text-white w-3/4",children:a})]})},$=function(){return"create"===K().formState?Object(j.jsx)(Y,{}):Object(j.jsx)(Z,{})},ee=function(){var e=Object(r.useContext)(k).setAuthenticated,t=Object(N.f)();return Object(j.jsx)("div",{className:"min-w-screen h-20 bg-black flex flex-row justify-end p-6",children:Object(j.jsx)("button",{onClick:function(){var n={logged:!1,token:""};e(n),localStorage.setItem("login",JSON.stringify(n)),t("/login")},className:"bg-purple-600 hover:bg-purple-800 text-white font-normal font-semibold rounded px-8",children:"Logout"})})},te=function(e){var t=e.localStyle,n=e.text,r=void 0===n?"":n,c=e.onClick,a=void 0===c?function(){}:c,s=e.background,o=e.ref;return Object(j.jsx)(j.Fragment,{children:s?Object(j.jsx)("button",{className:t,onClick:a,style:{backgroundImage:"url(".concat(s,")")},ref:o,children:r}):Object(j.jsxs)("button",{ref:o,className:t,onClick:a,children:[r,"  "]})})},ne=function(e){var t=e.actionText,n=e.onPagination,r=void 0===n?function(){}:n;return Object(j.jsx)("button",{onClick:function(){r()},className:"bg-purple-600 hover:bg-purple-800 mx-2 px-4 py-1 rounded text-white text-xl",children:t})},re=n(35),ce=function(e){var t=e.id,n=e.title,r=e.toggleActive,c=void 0===r?function(){}:r,a=K(),s=a.setFormState,o=a.setPostId,i=a.setClear,l=Object(N.f)();return Object(j.jsxs)("div",{className:"border-2 border-purple-900 flex h-12 items-center justify-between mx-4 mt-5 rounded",children:[Object(j.jsx)("div",{className:"ml-4 w-9/12",children:Object(j.jsx)("h2",{className:"font-round text-base",children:n})}),Object(j.jsxs)("div",{className:"flex h-full justify-between text-white text-2xl w-3/12 ",children:[Object(j.jsx)("div",{onClick:function(){l("/posts/".concat(t))},className:"bg-blue-500 hover:bg-blue-700 cursor-pointer flex h-full items-center justify-center w-4/12 ",children:Object(j.jsx)(re.a,{})}),Object(j.jsx)("div",{onClick:function(){s("edit"),o(t),i(!1)},className:"bg-yellow-500 hover:bg-yellow-600 cursor-pointer flex h-full justify-center items-center w-4/12",children:Object(j.jsx)(re.b,{})}),Object(j.jsx)("div",{onClick:function(){c()},className:"bg-green-600 hover:bg-green-700 cursor-pointer flex h-full items-center justify-center w-4/12",children:Object(j.jsx)(M.c,{})})]})]})},ae=function(e){e.id;var t=e.title,n=e.toggleActive,r=void 0===n?function(){}:n,c=K().setHelpMessage;return Object(j.jsxs)("div",{className:"border-2 border-purple-900 flex h-12 items-center justify-between mx-4 mt-5 rounded",children:[Object(j.jsx)("div",{className:"ml-4 w-9/12",children:Object(j.jsx)("h2",{className:"font-round text-base",children:t})}),Object(j.jsxs)("div",{className:"flex h-full justify-between text-white text-2xl w-3/12 ",children:[Object(j.jsx)("div",{onClick:function(){},className:"bg-blue-500 hover:bg-blue-700 cursor-pointer flex h-full items-center justify-center w-4/12 ",children:Object(j.jsx)(re.a,{})}),Object(j.jsx)("div",{onClick:function(){!function(){var e=document.querySelector("#help-message");c("No puedes editar un post oculto"),e.classList.remove("hidden"),setTimeout((function(){e.classList.add("hidden")}),3500)}()},className:"bg-yellow-500 hover:bg-yellow-600 cursor-pointer flex h-full justify-center items-center w-4/12",children:Object(j.jsx)(re.b,{})}),Object(j.jsx)("div",{onClick:function(){r()},className:"bg-red-500 hover:bg-red-700 cursor-pointer flex h-full items-center justify-center w-4/12",children:Object(j.jsx)(M.d,{})})]})]})},se=function(e){var t=e.id,n=e.title,c=e.active,a=K().setPostState,s=Object(r.useContext)(k).authenticated,o=function(){var e=Object(u.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=s.token,e.next=4,X.toggleActive(n,t);case 4:(r=e.sent)?(console.log(r),a((new Date).getTime()/10)):console.log("Ha ocurrido un error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return c?Object(j.jsx)(ce,{id:t,title:n,toggleActive:o}):Object(j.jsx)(ae,{id:t,title:n,toggleActive:o})},oe=function(e){var t=e.searchFunction,n=void 0===t?function(){}:t,c=e.clearFunction,a=void 0===c?function(){}:c,s=K(),i=s.setHelpMessage,d=s.setClear,b=s.page,f=s.formState,x=Object(r.useState)(""),p=Object(o.a)(x,2),m=p[0],h=p[1],g=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c,s,o,u,j,f,x=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.length>1&&void 0!==x[1]?x[1]:function(){},e.prev=1,a(!0),h(""),r=!1,c=0,e.next=8,X.tempLogin();case 8:o=e.sent,u=o.token;case 10:return e.next=12,X.getAdminPosts(u,100,c);case 12:if(s=e.sent){e.next=17;break}console.log(s.error),e.next=24;break;case 17:if(0!=s.data.length){e.next=23;break}if("break"!==function(){var e=document.querySelector("#help-message");return i("No se encontr\xf3 ning\xfan post con ese t\xedtulo"),e.classList.remove("hidden"),setTimeout((function(){e.classList.add("hidden")}),4e3),"break"}()){e.next=21;break}return e.abrupt("break",25);case 21:e.next=24;break;case 23:s.data.some((function(e){return e.title===t}))?r=!0:c+=1;case 24:if(!1===r){e.next=10;break}case 25:if(!r){e.next=30;break}j=s.data.filter((function(e){return e.title===t})),n(j),e.next=35;break;case 30:return d(!1),e.next=33,X.getAdminPosts(u,10,b);case 33:f=e.sent,n(f.data);case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(1),console.log(e.t0);case 40:case"end":return e.stop()}}),e,null,[[1,37]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"flex justify-center mt-5",children:[Object(j.jsx)("input",{type:"text",placeholder:"Search a post by its title here",className:"border-2 border-gray-300 font-normal px-3 py-1 rounded-l-lg text-base w-1/2",onChange:function(e){h(e.target.value)},value:m}),Object(j.jsx)("div",{onClick:function(e){e.preventDefault(),function(){if("edit"===f){h("");var e=document.querySelector("#help-message");i("No puedes buscar un post mientras est\xe1s editando otro"),e.classList.remove("hidden"),setTimeout((function(){e.classList.add("hidden")}),4e3)}else g(m,n)}()},className:"bg-purple-600 hover:bg-purple-800 border-2 border-gray-400 cursor-pointer flex items-center justify-center px-3 py-1 rounded-r-lg text-lg text-white",children:Object(j.jsx)(re.c,{})})]})},ie=function(){var e=K(),t=e.formState,n=e.postState,c=e.clear,a=e.setClear,s=e.page,i=e.setPage,d=Object(r.useState)([]),b=Object(o.a)(d,2),f=b[0],x=b[1],p=Object(r.useContext)(k).authenticated;Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=p.token,e.next=4,X.getAdminPosts(t,10,s);case 4:n=e.sent,x(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[s,t,n,c]);return Object(j.jsxs)("div",{className:"flex flex-col w-full md:w-1/2",children:[Object(j.jsx)(oe,{searchFunction:x,clearFunction:a}),f.map((function(e){return Object(j.jsx)(se,{id:e._id,title:e.title,active:e.active},e._id)})),c&&Object(j.jsx)("div",{className:"flex items-center justify-center mb-8 mt-6",children:Object(j.jsx)(te,{localStyle:"bg-pink-500 hover:bg-pink-700 mx-2 px-4 py-1 rounded text-white text-xl",text:"Clear search",onClick:function(e){e.preventDefault(),i(0),a(!1)}})}),!c&&Object(j.jsxs)("div",{className:"flex items-center justify-center mb-8 mt-6",children:[Object(j.jsx)(ne,{actionText:"Previous",onPagination:function(){var e=s;0!==e&&i(e-=1)}}),Object(j.jsx)(ne,{actionText:"Next",onPagination:function(){var e=s;i(e+=1)}})]})]})},le=function(){var e=Object(r.useContext)(k).authenticated,t=Object(N.f)();return Object(r.useEffect)((function(){e.logged||t("/")}),[]),Object(j.jsxs)(W,{children:[Object(j.jsx)(ee,{}),Object(j.jsxs)("div",{className:"flex flex-col h-screen md:flex-row",children:[Object(j.jsx)($,{}),Object(j.jsx)(ie,{})]})]})},ue=function(e){var t=e.id,n=void 0===t?"":t,r=e.title,c=void 0===r?"":r,a=e.image,s=void 0===a?"":a,o=Object(N.f)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:" group w-80 h-80 lg:w-60 lg:h-60  m-4 rounded-xl shadow-lg  bg-cover  ",style:{backgroundImage:"url(".concat(s,")")},children:Object(j.jsxs)("div",{className:"  w-full h-full rounded-xl flex flex-col justify-center  justify-items-center place-content-center gap-4 backdrop-filter group-hover:backdrop-blur-lg transition ease-in duration-500",children:[Object(j.jsx)("p",{className:"text-center m-4 md:m-8 invisible group-hover:visible font-normal font-semibold text-purple-400  overflow-x-hidden",children:c}),Object(j.jsx)(te,{onClick:function(){o("/posts/".concat(n))},localStyle:"h-8 rounded-xl invisible group-hover:visible transition bg-purple-400 m-8 text-white font-bold ",text:"See More"})]})})})},de=function(e){return e?{id:e._id,title:e.title,image:e.image}:null},je="https://posts-pw2021.herokuapp.com/api/v1/post/all",be={};be.getPosts=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c,a,s,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:10,r=o.length>2&&void 0!==o[2]?o[2]:0,e.prev=2,e.next=5,fetch("".concat(je,"?limit=").concat(n,"&page=").concat(r),{headers:{Authorization:"Bearer ".concat(t)},method:"GET"});case 5:return c=e.sent,e.next=8,c.json();case 8:if(a=e.sent,!c.ok){e.next=12;break}return s=a.data.map(de),e.abrupt("return",{response:!0,data:s,pages:a.pages});case 12:return e.abrupt("return",{response:!1,data:null});case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),be.getFavorites=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c,a,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1/post/fav"),{headers:{Authorization:"Bearer ".concat(t)},method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,!n.ok){e.next=21;break}c=r.favorites,a=[],s=0;case 11:if(!(s<c.length)){e.next=19;break}return e.next=14,be.getOnePost(c[s],t);case 14:o=e.sent,a.push(o.data);case 16:s++,e.next=11;break;case 19:return console.log(a),e.abrupt("return",{response:!0,data:a});case 21:return e.abrupt("return",{response:!1,data:null});case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),be.getOnePost=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1/post/one/").concat(t),{headers:{Authorization:"Bearer ".concat(n)},method:"GET"});case 2:return r=e.sent,e.next=5,r.json();case 5:if(c=e.sent,!r.ok){e.next=11;break}return e.next=9,de(c);case 9:return a=e.sent,e.abrupt("return",{response:!0,data:a});case 11:return e.abrupt("return",{response:!1,data:null});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var fe=be,xe=n.p+"static/media/Search.e17167c4.svg",pe=function(e){var t=e.searchFunction,n=void 0===t?function(){}:t,c=e.clearFunction,a=void 0===c?function(){}:c,s=(e.loading,Object(r.useState)("")),i=Object(o.a)(s,2),d=i[0],b=i[1],f=Object(r.useContext)(k).authenticated;Object(r.useEffect)((function(){console.log(d)}),[d]);var x=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c,a,s,o,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:function(){},e.prev=1,r=!1,c=0,s=f.token;case 5:return e.next=7,fe.getPosts(s,100,c);case 7:if((a=e.sent).response){e.next=12;break}console.log(a.error),e.next=17;break;case 12:if(0!==a.data.length){e.next=16;break}return e.abrupt("break",18);case 16:a.data.some((function(e){return e.title===t}))?r=!0:c+=1;case 17:if(!1===r){e.next=5;break}case 18:r?(o=a.data.filter((function(e){return e.title===t})),n(o)):console.log("error: Data not found"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"flex  flex-col flex-wrap justify-center justify-items-center content-evenly ",children:Object(j.jsx)("div",{className:"w-1/2  h-18 bg-loginpattern  p-4 rounded-xl shadow-lg   ",children:Object(j.jsxs)("form",{action:"",className:"w-auto h-auto flex flex-row flex-wrap justify-center justify-items-center content-evenly",children:[Object(j.jsx)("input",{type:"text",className:"w-2/3 h-12 bg-purple-300  rounded-xl mr-2  my-2 font-normal p-4 text-center  u-sm:h-12",onChange:function(e){b(e.target.value)},value:d}),Object(j.jsx)(te,{localStyle:"w-12 h-12  ml-4 my-2",background:xe,onClick:function(e){e.preventDefault(),x(d,n),a(!0),b("")}})]})})})},me=function(e){var t=e.fav,n=void 0!==t&&t,c=Object(r.useContext)(k).setAuthenticated,a=Object(N.f)(),s=function(){var e={logged:!1,token:""};c(e),localStorage.setItem("login",JSON.stringify(e)),a("/login")};return!0===n?Object(j.jsxs)("div",{className:"min-w-screen h-24 bg-loginpattern flex flex-row justify-center sm:justify-end p-6  u-sm:mb-10 p-6  ",children:[Object(j.jsx)(te,{onClick:function(){a("/favorites")},localStyle:"bg-pink-500 text-white font-normal font-semibold p-2 w-32 mr-24",text:"Favorites"}),Object(j.jsx)(te,{onClick:s,localStyle:"bg-pink-500 text-white font-normal font-semibold p-2 w-32 mr-4",text:"Logout"})]}):Object(j.jsxs)("div",{className:"min-w-screen h-24  bg-loginpattern flex flex-row justify-center sm:justify-end p-6  u-sm:mb-10 p-6  ",children:[Object(j.jsx)(te,{onClick:function(){a("/home")},localStyle:"bg-pink-500 text-white font-normal font-semibold p-2 w-32 mr-24",text:"Home"}),Object(j.jsx)(te,{onClick:s,localStyle:"bg-pink-500 text-white font-normal font-semibold p-2 w-32 ",text:"Logout"})]})},he=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(0),s=Object(o.a)(a,2),i=s[0],d=s[1],b=Object(r.useState)(!1),f=Object(o.a)(b,2),x=f[0],p=f[1],m=Object(r.useState)(15),h=Object(o.a)(m,1)[0],g=Object(r.useContext)(k).authenticated,O=Object(N.f)(),w=Object(r.useState)(Object(j.jsx)("div",{})),y=Object(o.a)(w,2),S=(y[0],y[1]),C=Object(r.useState)(!1),P=Object(o.a)(C,2),F=P[0],T=P[1],A=Object(j.jsx)(E,{});Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.logged){e.next=4;break}O("/"),e.next=8;break;case 4:return e.next=6,v.whoami(g.token);case 6:"admin"===e.sent.role&&O("/admin");case 8:case"end":return e.stop()}}),e)})))();var e=g.token;F||Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe.getPosts(e,h,i);case 3:(n=t.sent).response?(n.response?0===n.data.length?d(0):c(n.data):S(Object(j.jsx)(I,{})),T(!0)):console.log(n.error),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),[i,x,F]);var D=function(e,t){return t?e+1:0===e?e:e-1};return Object(j.jsx)(j.Fragment,{children:F?Object(j.jsxs)("main",{className:" min-w-screen min-h-screen m-0 flex flex-col flex-wrap justify-center justify-items-center content-evenly ",children:[Object(j.jsx)(me,{fav:!0}),Object(j.jsx)(pe,{searchFunction:c,clearFunction:p}),Object(j.jsx)("div",{className:"min-w-screen   flex flex-row flex-wrap justify-center justify-items-center content-evenly p-20 ",children:n.map((function(e){return Object(j.jsx)(ue,{id:e.id,title:e.title,image:e.image},e.id)}))}),Object(j.jsxs)("div",{className:"w-full h-40 flex flex-row justify-center justify-items-center content-evenly ",children:[x&&Object(j.jsx)(te,{localStyle:"w-40 h-10 bg-pink-500 m-6 font-normal text-white rounded-md",text:"Clear",onClick:function(e){e.preventDefault(),d(0),p(!1),T(!1)}}),!x&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(te,{localStyle:"w-40 h-10 bg-pink-500 m-6 font-normal text-white rounded-md",text:"Previous",onClick:function(e){e.preventDefault(),d(D(i,!1)),T(!1)}}),Object(j.jsx)(te,{localStyle:"w-40 h-10 bg-pink-500 m-6 font-normal text-white rounded-md",text:"Next",onClick:function(e){e.preventDefault(),d(D(i,!0)),T(!1)}})]})]}),Object(j.jsx)("div",{className:"min-w-screen h-24 bg-loginpattern flex flex-row justify-end p-6"})]}):A})},ge=n(25),Oe=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(0),s=Object(o.a)(a,2),i=s[0],d=s[1],b=Object(r.useState)(!1),f=Object(o.a)(b,2),x=f[0],p=f[1],m=Object(r.useContext)(k).authenticated,h=Object(N.f)(),g=Object(r.useState)(Object(j.jsx)("div",{})),O=Object(o.a)(g,2),w=(O[0],O[1]),y=Object(r.useState)(!1),S=Object(o.a)(y,2),C=S[0],P=S[1],F=Object(j.jsx)(E,{}),T=m.token,A=Object(r.useState)(15),D=Object(o.a)(A,2),L=D[0],M=(D[1],function(e){e.prevItems;var t=e.getter,n=void 0===t?function(){}:t,c=e.token,a=e.limit,s=void 0===a?10:a,i=e.page,d=void 0===i?0:i,j=n,b=Object(r.useState)([]),f=Object(o.a)(b,2),x=f[0],p=f[1],m=Object(r.useRef)(d),h=Object(r.useRef)(!1),g=Object(r.useState)(!0),O=Object(o.a)(g,2),v=O[0],w=O[1],y=Object(r.useState)(!1),k=Object(o.a)(y,2),N=k[0],S=k[1],C=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(c,s,t);case 3:n=e.sent,r=n.data,w(n.pages>m.current),S(!0),Array.isArray(x)?p((function(e){return[].concat(Object(U.a)(e),Object(U.a)(r))})):p(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){m.current=Number(m.current)+1,C(m.current)},F=Object(ge.a)({onEnter:function(){P()}}).observe;return Object(r.useEffect)((function(){h.current||(C(),h.current=!0)}),[C]),{items:x,hasMore:v,loadItems:C,loadNext:P,rendered:N,loadMoreRef:F}}({prevItems:n,getter:fe.getPosts,token:T,limit:L,page:i})),H=M.loadMoreRef,z=M.items,B=M.hasMore,q=M.loadItems,G=M.loadNext,J=M.rendered;return Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.logged){e.next=4;break}h("/"),e.next=8;break;case 4:return e.next=6,v.whoami(m.token);case 6:"admin"===e.sent.role&&h("/admin");case 8:case"end":return e.stop()}}),e)})))(),x&&!C&&console.log("Esto era"),C||Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.getPosts(T,L,i);case 2:(t=e.sent).response?(t.response?0===t.data.length?d(0):c(t.data):w(Object(j.jsx)(I,{})),P(!0)):console.log(t.error);case 4:case"end":return e.stop()}}),e)})))()}catch(t){console.log(t)}case 2:case"end":return e.stop()}}),e)})))(),B&&J&&!x&&(c(z),P(!0))}),[q,C,x]),Object(j.jsx)(j.Fragment,{children:C?Object(j.jsxs)("main",{className:" min-w-screen min-h-screen m-0 flex flex-col flex-wrap justify-center justify-items-center content-evenly ",children:[Object(j.jsx)(me,{fav:!0}),Object(j.jsx)(pe,{searchFunction:c,clearFunction:p,loading:function(){P()}}),Object(j.jsx)("div",{className:"min-w-screen  flex flex-row flex-wrap justify-center justify-items-center content-evenly p-20",children:n.map((function(e){return Object(j.jsx)(ue,{id:e.id,title:e.title,image:e.image},e.id)}))}),Object(j.jsxs)("div",{className:"w-full h-40 flex flex-row justify-center justify-items-center sm:content-evenly ",children:[x&&Object(j.jsx)(te,{localStyle:"w-40 h-10 bg-pink-500 m-6 font-normal text-white rounded-md",text:"Clear",onClick:function(e){e.preventDefault(),d(0),p(!1),P(!1)}}),!x&&B&&Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{ref:H,className:"",onClick:function(){G()}})})]}),Object(j.jsx)("div",{className:"min-w-screen h-24 bg-loginpattern flex flex-row justify-end p-6"})]}):F})},ve=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(0),s=Object(o.a)(a,2),i=s[0],d=s[1],b=Object(r.useState)(!1),f=Object(o.a)(b,2),x=f[0],p=f[1],m=Object(r.useState)(15),h=(Object(o.a)(m,1)[0],Object(r.useContext)(k).authenticated),g=Object(N.f)(),O=Object(r.useState)(Object(j.jsx)("div",{})),w=Object(o.a)(O,2),y=(w[0],w[1]),S=Object(r.useState)(!1),C=Object(o.a)(S,2),P=C[0],F=C[1],T=Object(j.jsx)(E,{});Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.logged){e.next=4;break}g("/"),e.next=8;break;case 4:return e.next=6,v.whoami(h.token);case 6:"admin"===e.sent.role&&g("/admin");case 8:case"end":return e.stop()}}),e)})))();var e=h.token;P||Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe.getFavorites(e);case 3:(n=t.sent).response?(n.response?0===n.data.length?d(0):c(n.data):y(Object(j.jsx)(I,{})),F(!0)):console.log(n.error),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),[i,x,P]);var A=function(e,t){return t?e+1:0===e?e:e-1};return Object(j.jsx)(j.Fragment,{children:P?Object(j.jsxs)("main",{className:" min-w-screen min-h-screen m-0 flex flex-col flex-wrap justify-center justify-items-center content-evenly ",children:[Object(j.jsx)(me,{fav:!1}),Object(j.jsx)(pe,{searchFunction:c,clearFunction:p}),Object(j.jsx)("div",{className:"min-w-screen   flex flex-row flex-wrap justify-center justify-items-center content-evenly p-20 ",children:n.map((function(e){return Object(j.jsx)(ue,{id:e.id,title:e.title,image:e.image},e.id)}))}),Object(j.jsxs)("div",{className:"w-full h-40 flex flex-row justify-center justify-items-center content-evenly ",children:[x&&Object(j.jsx)(te,{localStyle:"w-40 h-10 bg-pink-500 m-6 font-normal text-white rounded-md",text:"Clear",onClick:function(e){e.preventDefault(),d(0),p(!1),F(!1)}}),!x&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(te,{localStyle:"w-40 h-10 bg-pink-500 m-6 font-normal text-white rounded-md",text:"Previous",onClick:function(e){e.preventDefault(),d(A(i,!1)),F(!1)}}),Object(j.jsx)(te,{localStyle:"w-40 h-10 bg-pink-500 m-6 font-normal text-white rounded-md",text:"Next",onClick:function(e){e.preventDefault(),d(A(i,!0)),F(!1)}})]})]}),Object(j.jsx)("div",{className:"min-w-screen h-24 bg-loginpattern flex flex-row justify-end p-6"})]}):T})};var we=function(){var e=Object(r.useState)(window.innerWidth),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(window.innerHeight),s=Object(o.a)(a,2),i=s[0],l=s[1];return Object(r.useEffect)((function(){return window.addEventListener("resize",(function(){l(window.innerHeight),c(window.innerWidth)})),function(){window.removeEventListener("resize",(function(){l(window.innerHeight),c(window.innerWidth)}))}}),[]),[i,n]},ye=function(){var e=we(),t=Object(o.a)(e,2),n=(t[0],t[1]),c=Object(r.useContext)(k).authenticated,a=Object(N.f)();return Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.logged){e.next=4;break}a("/"),e.next=8;break;case 4:return e.next=6,v.whoami(c.token);case 6:"admin"===(t=e.sent).role?a("/admin"):"user"===t.role&&a(n>=768?"/main":"/mobile");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),null};var ke=function(){var e=Object(r.useState)(null!=localStorage.login?JSON.parse(localStorage.login):{}),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(j.jsx)(k.Provider,{value:{authenticated:n,setAuthenticated:c},children:Object(j.jsx)(C.a,{children:Object(j.jsxs)(N.c,{children:[Object(j.jsx)(N.a,{exact:!0,path:"/",element:Object(j.jsx)(S,{})}),Object(j.jsx)(N.a,{path:"/login",element:Object(j.jsx)(S,{})}),Object(j.jsx)(N.a,{path:"/home",element:Object(j.jsx)(ye,{})}),Object(j.jsx)(N.a,{path:"/main",element:Object(j.jsx)(he,{})}),Object(j.jsx)(N.a,{path:"/admin",element:Object(j.jsx)(le,{})}),Object(j.jsx)(N.a,{path:"/posts/:id",element:Object(j.jsx)(R,{})}),Object(j.jsx)(N.a,{path:"*",element:Object(j.jsx)(F,{})}),Object(j.jsx)(N.a,{path:"/mobile",element:Object(j.jsx)(Oe,{})}),Object(j.jsx)(N.a,{path:"/favorites",element:Object(j.jsx)(ve,{})})]})})})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(ke,{})}),document.getElementById("root")),Ne()}},[[33,1,2]]]);
//# sourceMappingURL=main.7cdb0a07.chunk.js.map